# Настройка облачной инфраструктуры для проекта по определению мошеннических транзакций


## Цель работы
Знакомство с облачным провайдером Yandex Cloud: 
  * работа с сервисами [Object Storage](#yandex-object-storage) и [Data Processing](#yandex-data-processing)
  * создание Spark-кластера и копирование в него данных 
  * изучение оценки затрат при проектировании облачной инфраструктуры


## Сервисы
### Yandex Object Storage
Универсальное масштабируемое S3-хранилище

### Yandex Data Processing
Сервис для обработки многотерабайтных массивов данных 
с использованием инструментов с открытым исходным кодом, 
таких как Apache Spark™, Apache Hadoop®, Apache HBase®, Apache Zeppelin™ 
и других сервисов экосистемы Apache®.


## Настройка источника, из которого будет устанавливаться провайдер

```
$ cat ~/.terraformrc 
provider_installation {
  network_mirror {
    url = "https://terraform-mirror.yandexcloud.net/"
    include = ["registry.terraform.io/*/*"]
  }
  direct {
    exclude = ["registry.terraform.io/*/*"]
  }
}
```


## Задачи:
1. Создан новый бакет в *Yandex Cloud Object Storage* с использованием *terraform* скрипта
2. В него скопировано содержимое из предоставленного хранилища *S3*
	* развернут прокси-узел для работы с сервисами облака
	* скопированы данные из общего *S3-хранилища* в созданный бакет с использованием инструмента *s3cmd*
	* бакет доступен по ссылке: s3://mlops-bucket-poopaeca/
3. С помощью *terraform* скрипта создан *Spark* кластер в **Yandex Data Processing** с двумя подкластерами:
	* master: 
		* класс хоста: s3-c2-m8
		* кол-во хостов: 1
		* размер хранилища: 40 ГБ
	* data: 
		* класс хоста: s3-c4-m16
		* кол-во хостов: 3 
		* размер хранилища: 128 ГБ
<!--

4. Соединиться по SSH с мастер-узлом и выполнить на нём команду копирования
содержимого хранилища в файловую систему HDFS с использованием инструмента hadoop
distcp. Для проверки преподавателем необходимо вывести содержимое HDFS-директории
в консоль, а снимок экрана с этой информацией привести в README-файле Вашего
GitHub-репозитория.

5. Пользуясь тарифным калькулятором Yandex Cloud, оценить месячные затраты для
поддержания работоспособности созданного кластера. Оценить, насколько использование
HDFS-хранилища дороже, чем объектного.
Указание. Кроме тарифного калькулятора, позволяющего делать оценку требуемых
средств, на странице платежного аккаунта есть раздел с детализацией биллинга за
произвольный период времени. С его помощью можно определить сумму уже потраченных
средств на каждый из используемых облачных сервисов в процессе работы.

6. Предложить способы для оптимизации затрат на содержание Spark- кластера в
облаке и попробовать их реализовать.

7. В соответствии с достигнутыми результатами, изменить статус ранее созданных
задач на Kanban-доске в GitHub Projects. Возможно, некоторые задачи нужно будет
скорректировать, разделить на подзадачи или объединить друг с другом.

8. Полностью удалить созданный кластер, чтобы избежать оплаты ресурсов в период
его простаивания. Воспользуйтесь для этого командой terraform destroy.
-->
